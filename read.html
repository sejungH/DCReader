<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet"
        crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css"
        crossorigin="anonymous">

    <script src="https://code.jquery.com/jquery-3.7.1.min.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"
        crossorigin="anonymous"></script>
    <script src="scripts/dbController.js"></script>

    <title>DCReader</title>
</head>

<body data-bs-theme="dark">
    <div class="position-absolute top-50 start-50 translate-middle">
        <div id="spinner" class="d-flex justify-content-center my-3">
            <div class="spinner-border" role="status">
                <span class="visually-hidden">Loading...</span>
            </div>
        </div>
    </div>

    <nav class="navbar bg-body-tertiary">
        <div class="container-fluid">
            <a class="navbar-brand">DCReader</a>
            <form class="d-flex" role="search">
                <input class="form-control me-2" type="search" placeholder="시리즈 검색" aria-label="Search" />
                <button class="btn btn-outline-primary text-nowrap" type="submit">검색</button>
            </form>
        </div>
    </nav>

    <div class="container-lg d-none">
        <h1 id="title">test</h1>
        <div id="content">content</div>
    </div>

    <script>
        parameters = new URLSearchParams(window.location.search);
        const series = parameters.get('series');
        const id = parameters.get('id');

        const dbController = new DBController();

        if (series) {
            document.getElementsByTagName('title')[0].innerText = series + ' - DCReader';
        }

        if (id) {
            dbController.fetchData('dcinside', id).then(data => {

                document.getElementById('title').innerText = data.title;
                document.getElementById('content').innerHTML = data.content;

                // 스피너 숨기기
                document.getElementById('spinner').classList.remove('d-flex');
                document.getElementById('spinner').classList.add('d-none');

                // 메인 컨텐츠 보이기
                document.querySelector('.container-lg').classList.remove('d-none');
            });
        }



    </script>
</body>

</html>